# 원티드 프리온보딩 백엔드 코스 선발과제

## ERD

![스크린샷 2022-10-10 오후 6 01 52](https://user-images.githubusercontent.com/103938821/194831611-c489f20d-37e6-404f-b120-db86efe77c81.png)

- 요구사항들을 전체적으로 분석하여 위와 같이 ERD를 설계하였습니다.

## 요구사항 분석 및 구현

1. 채용공고 등록

- 채용공고와 관련하여 CRUD API 구현 작업 중 Create에 해당하는 작업입니다.
- 채용공고를 등록하기 위해 필요한 정보(회사ID, 채용포지션, 채용보상금, 채용내용, 사용기술)에 대한 유효성 검사를 수행 후 데이터베이스에 저장하도록 API를 구현하였습니다.

2. 채용공고 수정

- 수정할 채용공고에 대한 채용공고ID를 url 파마리터로 받아 해당 채용공고가 DB에 존재하는지 여부를 확인하도록 구현하였습니다.
- 요구사항을 보았을 때 수정하는 값 이외에 모든 데이터들을 받는 것으로 판단되어 PATCH METHOD가 아닌 PUT METHOD를 사용하여 구현하였습니다.
- 입력 데이터들에 대한 유효성 검사를 수행한 후 DB에 수정할 수 있도록 API를 구현하였습니다.
- 수정 작업이 수행될 때 해당 데이터를 다른 곳에서 수정하지 못하도록 lock 작업을 수행하였으며, 업데이트 과정에서 오류가 발생하였을 때 해당 작업을 모두 취소할 수 있도록 트랜잭션 작업을 수행하였습니다.

3. 채용공고 삭제

- 삭제할 채용공고에 대한 채용공고ID를 url 파라미터로 받아 해당 채용공고가 DB에 존재하는지 여부를 확인하도록 구현하였습니다.
- 삭제 작업을 수행도리 때 해당 데이터를 다른 곳에서 사용하지 못하도록 lock 작업을 수행하였습니다.
- 삭제 작업이 완료된 이후 http status code를 204가 아닌 200으로 설정하여 삭제가 완료된 메시지를 전달하도록 구현하였습니다.

4. 채용공고 목록 조회

- 채용공고 테이블(notice)과 회사 테이블(company)을 inner join하여 요구사항과 같이 데이터를 조회되도록 API를 구현하였습니다.
- 추가구현 : 채용공고 검색 기능
  > - 검색하고자 하는 키워드를 쿼리스트링으로 받았으며, 키워드에 대한 공백 여부를 고려하지 않고자 replace 함수를 이용하여 키워드에 대한 공백을 제거하였습니다.
  > - 키워드가 회사명, 채용포지션, 사용기술에서 검색하도록 구현하였으며, mysql 쿼리문에서 where like를 이용하여 키워드를 검색하도록 API를 구현하였습니다.

5. 채용공고 상세 페이지

- 채용공고 ID를 url 파라미터로 받아 해당 채용공고의 상세정보를 조회할 수 있도록 기능을 구현하였습니다.
- 채용공고 테이블(notice)과 회사 테이블(company)을 inner join하여 요구사항과 같이 데이터를 조회되도록 API를 구현하였습니다.
- 해당 회사가 올린 다른 채용공고를 추가적으로 포함하고자 서브쿼리를 이용하였으며, mysql의 JSON_ARRAYAGG를 이용하여 해당 데이터들이 배열에 담겨 조회되도록 API를 구현하였습니다.
- JSON형식으로 조회된 데이터를 JSON parse 함수를 이용하여 구문으로 변경시켰습니다.

6. 사용자 채용공고 지원

- 해당 기능을 구현하기 위하여 유저(user)와 채용공고(notice)테이블 간에 지원과 관련된 테이블(apply)을 만들어 해당 정보를 저장하였습니다.
- 요구사항에 사용자는 1회만 지원이 가능함으로 지원 테이블에 회원 ID가 존재할 경우 오류를 발생하도록 API를 구현하였습니다.
